<!DOCTYPE html>

<html>
	<head>
		<script src="three.min.js"></script>
		<script src="human.js"></script>
	</head>
	
	<body>
		<h1>"Hip hop dancing"<br><small>ф.н. 81620 &ndash; група 2 &ndash; Mихаил Стаменов</small></h1>

		<script>
			// нагласяване на цвета и центрирането на текста с имената ви
			document.getElementsByTagName('h1')[0].style = 'color:white; text-align:center; font-size:1.75em';
			
			// рисувателно поле на цял екран
			renderer = new THREE.WebGLRenderer({antialias:true});
			renderer.setSize( window.innerWidth, window.innerHeight );
			document.body.appendChild( renderer.domElement );
			renderer.domElement.style = 'width:100%; height:100%; position:fixed; top:0; left:0; z-index:-1;';
			
			// сцена и камера
			scene = new THREE.Scene();
			camera = new THREE.PerspectiveCamera( 30, window.innerWidth/window.innerHeight, 0.1, 2000 );
			camera.position.set(0,3,150);

			// светлини
			var light = new THREE.DirectionalLight('lightblue',0.8);
			light.position.set(0,1,4);
			scene.add(light);
			scene.add( new THREE.AmbientLight('white',0.4) );
			
			// функция за анимиране на сцената
			var t = 0; // време
			function drawFrame()
			{
				requestAnimationFrame( drawFrame );
				if (animate) animate(t++);
				renderer.render( scene, camera );
			}			
						var geometry = new THREE.BoxGeometry( 63, 60, 1/3 );
			var material = new THREE.MeshPhongMaterial();
			material.color.set('chartreuse');
			var plate = new THREE.Mesh( geometry, material );
			plate.rotateX(Math.PI/2);
			plate.rotateZ(Math.PI/2);
			plate.position.set(0,-32,0);
			//scene.add( plate );
			// човече
			манекен = мъжествен();
			
			манекен.rotateY(-Math.PI/2);
			манекен.rotateX(Math.PI);
			манекен.д_ръка.врът(0, 40, -95);
			манекен.л_ръка.врът(0, -40, -95);
			
			манекен.д_лакът.врът(0, 0, -85);
			манекен.л_лакът.врът(0, 0, -85);
			
			манекен.д_китка.врът(0, 0, -90);
			манекен.л_китка.врът(0, 0, -90);
			
			манекен.д_крак.врът(-40, 0, 0);
			манекен.л_крак.врът(40, 0, 0);
			манекен.position.set(20, 0 ,10);
			
			
			манекенвтори = мъжествен();
			манекенвтори.rotateY(-Math.PI/4);
			манекенвтори.д_ръка.врът(0, 40, -95);
			манекенвтори.д_лакът.врът(0, 0, -85);
			// тук се описват статичните елементи на позата
			
			// анимация на човечето
			animate = function (t)
			{

				//манекен.rotateY(Math.PI/12);
					if(t%148>10&&t%148<21)
					{
						манекен.тяло.врът(0, 5*(t%148-10), 0);
						манекен.rotateY(-rad(5));
						манекен.л_крак.врът(40-(t%148-10)*4, 0, -9*(t%148-10));
						манекен.д_коляно.врът(0, 0, 9*(t%148-10));
					}
					if(t%148>21&&t%148<27)
					{
						манекен.тяло.врът(0, 50-10*(t%148-21), 0);
						манекен.rotateY(rad(10));
						манекен.л_крак.врът(8*(t%148-21), 0, -90+18*(t%148-21));
						манекен.д_коляно.врът(0, 0, 90-18*(t%148-21));
					}
					if(t%148>26)
					{
						//манекен.rotateY(Math.PI/9);
						if(t%148<57)
						{
							манекен.rotateY(rad(15+20*(t%148-26)/30));
							if(t%148<32)
							{
								манекен.тяло.врът(0, -10*(t%148-26), 0);
							}
							else
							{
								if(t%148<37)
									манекен.тяло.врът(0, -50+10*(t%148-31), 0);
							}
							if(t%148<47)
							{
									манекен.д_ръка.врът(0, + 40-(t%148-26), -95+(t%148-26));
									манекен.л_ръка.врът(0, - 40+(t%148-26), -95+(t%148-26));						
							}

			
							манекен.д_лакът.врът(0, 0, -85+2*(t%148-26));
							манекен.л_лакът.врът(0, 0, -85+2*(t%148-26));
			
							манекен.д_китка.врът(0, 3*(t%148-26), -90+3*(t%148-26));
							манекен.л_китка.врът(0, -3*(t%148-26),-90+3*(t%148-26));
			
							манекен.д_крак.врът(-40+4*(t%148-26)/3, 0, -t%148+26);
							манекен.л_крак.врът(40-4*(t%148-26)/3, 0, -t%148+26);
							манекен.д_коляно.врът(0, 0, t%148-26);
							
						}
						else
						{
							if(t%148<97)
							{	манекен.rotateY(rad(35));}
							else
							{
								if(35-20*(t%148-96)/30>1)
								{
									манекен.rotateY(rad(35-20*(t%148-96)/30));
									
									манекен.д_ръка.врът(0,  20+2*(t%148-96)/5, -75 - (t%148-96)*2/5);
									манекен.л_ръка.врът(0, - 20-2*(t%148-96)/5, -75 - (t%148-96)*2/5);
			
									манекен.д_лакът.врът(0, 0,-25 - 6*(t%148-96)/5);
									манекен.л_лакът.врът(0, 0, -25 - 6*(t%148-96)/5);
			
									манекен.д_китка.врът(0, 90-9*(t%148-96)/5, -9*(t%148-96)/5);
									манекен.л_китка.врът(0, -90+9*(t%148-96)/5,-9*(t%148-96)/5);
			
									манекен.д_крак.врът(-4*(t%148-96)/5, 0, -30 + 3*(t%148-96)/5 );
									манекен.л_крак.врът(4*(t%148-96)/5, 0, -30 + 3*(t%148-96)/5 );
									манекен.д_коляно.врът(0, 0, 30 - 3*(t%148-96)/5);
									
								}	
							}
						}
					}
					//манекен.тяло.врът(0, t%360, 0);
				
				/*if(t%360>15&&t%360<=30)
				{
					манекен.тяло.врът(0, 60-t%360, 0);
					манекен.rotateY(rad(6));
					//манекен.тяло.врът(0, 60-t%360, 0);
				}*/
				
				манекенвтори.position.set(-40, 2.5 - 2.5*sin(15*t) ,-10)
				манекенвтори.д_лакът.врът(0,-(35+35*sin(15*t)), -85);
				манекенвтори.д_лакът.врът(0,-(35+35*sin(15*t)), -85);
				манекенвтори.д_крак.врът(0, 0, -(10+10*sin(15*t)));
				манекенвтори.л_крак.врът(0, 0, -(10+10*sin(15*t)));
				манекенвтори.д_коляно.врът(0, 0, (20+20*sin(15*t)));
				манекенвтори.л_коляно.врът(0, 0, (20+20*sin(15*t)));
				манекенвтори.д_глезен.врът(0, 0, -(12.5+12.5*sin(15*t)));
				манекенвтори.л_глезен.врът(0, 0, -(12.5+12.5*sin(15*t)));
			//scene.rotation.y += 0.015;
			}
			//function drawFrame()
			//{
			//	requestAnimationFrame( drawFrame );
				//scene.rotation.x += 0.015;
			//	scene.rotation.y += 0.015;
			//	renderer.render( scene, camera );
			//}
			drawFrame();
		</script>
	</body>
</html>